<div class="checkout-page">
  <div class="container">
    <div *ngIf="!isLoading && cartItems.length > 0" class="checkout-content">
      <div class="checkout-layout">
        <div class="checkout-form-section">
          <div class="form-section">
            <h2>üë§ Th√¥ng tin kh√°ch h√†ng</h2>
            <div class="form-grid">
              <div class="form-group">
                <label for="fullName">H·ªç v√† t√™n *</label>
                <input type="text" id="fullName" [(ngModel)]="customerInfo.fullName" name="fullName" class="form-input" required>
              </div>
              <div class="form-group">
                <label for="email">Email *</label>
                <input type="email" id="email" [(ngModel)]="customerInfo.email" name="email" class="form-input" required>
              </div>
              <div class="form-group">
                <label for="phone">S·ªë ƒëi·ªán tho·∫°i *</label>
                <input type="tel" id="phone" [(ngModel)]="customerInfo.phone" name="phone" class="form-input" required>
              </div>
              <div class="form-group">
                <label for="address">ƒê·ªãa ch·ªâ *</label>
                <input type="text" id="address" [(ngModel)]="customerInfo.address" name="address" class="form-input" required>
              </div>
              <div class="form-group">
                <label for="city">T·ªânh/Th√†nh ph·ªë *</label>
                <input type="text" id="city" [(ngModel)]="customerInfo.city" name="city" class="form-input" required>
              </div>
              <div class="form-group">
                <label for="district">Qu·∫≠n/Huy·ªán *</label>
                <input type="text" id="district" [(ngModel)]="customerInfo.district" name="district" class="form-input" required>
              </div>
              <div class="form-group">
                <label for="ward">Ph∆∞·ªùng/X√£</label>
                <input type="text" id="ward" [(ngModel)]="customerInfo.ward" name="ward" class="form-input">
              </div>
              <div class="form-group">
                <label for="note">Ghi ch√∫ (T√πy ch·ªçn)</label>
                <textarea id="note" [(ngModel)]="customerInfo.note" name="note" class="form-input" rows="3"></textarea>
              </div>
            </div>
          </div>

          <div class="form-section">
            <h2>üí≥ Ph∆∞∆°ng th·ª©c thanh to√°n</h2>
            <div class="payment-methods">
              <label class="payment-method" [class.active]="paymentMethod === 'COD'">
                <input type="radio" name="payment" value="COD" [(ngModel)]="paymentMethod" hidden>
                <div class="payment-content">
                  <div class="payment-icon">üí∞</div>
                  <div class="payment-info">
                    <div class="payment-title">Thanh to√°n khi nh·∫≠n h√†ng (COD)</div>
                    <div class="payment-desc">Tr·∫£ ti·ªÅn m·∫∑t khi nh·∫≠n ƒë∆∞·ª£c h√†ng</div>
                  </div>
                  <div class="payment-check">‚úì</div>
                </div>
              </label>

              <label class="payment-method" [class.active]="paymentMethod === 'CREDIT_CARD'">
                <input type="radio" name="payment" value="CREDIT_CARD" [(ngModel)]="paymentMethod" hidden>
                <div class="payment-content">
                  <div class="payment-icon">üí≥</div>
                  <div class="payment-info">
                    <div class="payment-title">Th·∫ª T√≠n d·ª•ng/Ghi n·ª£</div>
                    <div class="payment-desc">Thanh to√°n qua th·∫ª Visa, Master...</div>
                  </div>
                  <div class="payment-check">‚úì</div>
                </div>
              </label>

              <label class="payment-method" [class.active]="paymentMethod === 'PAYPAL'">
                <input type="radio" name="payment" value="PAYPAL" [(ngModel)]="paymentMethod" hidden>
                <div class="payment-content">
                  <div class="payment-icon">üÖøÔ∏è</div>
                  <div class="payment-info">
                    <div class="payment-title">PayPal</div>
                    <div class="payment-desc">Thanh to√°n qua v√≠ PayPal</div>
                  </div>
                  <div class="payment-check">‚úì</div>
                </div>
              </label>

              <label class="payment-method" [class.active]="paymentMethod === 'BANK_TRANSFER'">
                <input type="radio" name="payment" value="BANK_TRANSFER" [(ngModel)]="paymentMethod" hidden>
                <div class="payment-content">
                  <div class="payment-icon">üè¶</div>
                  <div class="payment-info">
                    <div class="payment-title">Chuy·ªÉn kho·∫£n ng√¢n h√†ng</div>
                    <div class="payment-desc">Chuy·ªÉn kho·∫£n qua VietQR/S·ªë t√†i kho·∫£n</div>
                  </div>
                  <div class="payment-check">‚úì</div>
                </div>
              </label>
            </div>
          </div>
        </div>

        <div class="order-summary-section">
          <div class="summary-card">
            <h3>üì¶ ƒê∆°n h√†ng c·ªßa b·∫°n</h3>
            
            <div class="order-items">
              <div *ngFor="let item of cartItems" class="order-item">
                <div class="item-image">
                  <img [src]="item.image || 'assets/images/default-product.png'" [alt]="item.productName">
                  <span class="item-quantity">{{ item.quantity }}</span>
                </div>
                <div class="item-info">
                  <div class="item-name">{{ item.productName }}</div>
                  <div class="item-brand">SKU: {{ item.productId }}</div>
                </div>
                <div class="item-price">{{ (item.price * item.quantity) | number }}‚Ç´</div>
              </div>
            </div>

            <div class="order-totals">
              <div class="summary-row">
                <span>T·∫°m t√≠nh:</span>
                <span>{{ total | number }}‚Ç´</span>
              </div>
              <div class="summary-row">
                <span>Ph√≠ v·∫≠n chuy·ªÉn:</span>
                <span>{{ shippingFee | number }}‚Ç´</span>
              </div>
              <div class="summary-row grand-total">
                <strong>T·ªïng c·ªông:</strong>
                <strong>{{ grandTotal | number }}‚Ç´</strong>
              </div>
            </div>
            
            <button class="btn-place-order" (click)="placeOrder()" [disabled]="isLoading">
              <span *ngIf="!isLoading">ƒê·∫∑t H√†ng</span>
              <span *ngIf="isLoading" class="loading-spinner-btn"></span>
            </button>
            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>