<div class="profile-page">
  <div class="container">
    <div class="profile-layout">
      
      <app-account-sidebar [activePage]="activeTab"></app-account-sidebar>

      <main class="profile-content">
        @if (activeTab === 'profile') {
          <div class="profile-tab">
            <h1 class="page-title">Hồ sơ của tôi</h1>
            <p class="page-subtitle">Quản lý thông tin cá nhân của bạn để bảo mật tài khoản.</p>

            <form (ngSubmit)="onUpdateProfile()" class="profile-form">
              <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" [value]="authService.userEmail" class="form-input" readonly disabled>
              </div>
              <div class="form-group">
                <label for="name">Họ và tên *</label>
                <input type="text" id="name" [(ngModel)]="profileData.name" name="name" class="form-input" required>
              </div>
              <div class="form-group">
                <label for="phone">Số điện thoại *</label>
                <input type="tel" id="phone" [(ngModel)]="profileData.phone" name="phone" class="form-input" required>
              </div>
              <div class="form-group">
                <label for="address">Địa chỉ *</label>
                <input type="text" id="address" [(ngModel)]="profileData.address" name="address" class="form-input" required>
              </div>

              @if (profileMessage) {
                <div class="message success">{{ profileMessage }}</div>
              }
              @if (profileError) {
                <div class="message error">{{ profileError }}</div>
              }

              <div class="form-actions">
                <button type="submit" class="btn btn-primary" [disabled]="isLoadingProfile">
                  {{ isLoadingProfile ? 'Đang lưu...' : 'Lưu thay đổi' }}
                </button>
              </div>
            </form>
          </div>
        }

        @if (activeTab === 'password') {
          <div class="password-tab">
            <h1 class="page-title">Đổi mật khẩu</h1>
            <p class="page-subtitle">Để bảo mật, vui lòng không chia sẻ mật khẩu cho người khác.</p>

            <form (ngSubmit)="onChangePassword()" class="profile-form">
              <div class="form-group">
                <label for="currentPassword">Mật khẩu hiện tại *</label>
                <input type="password" id="currentPassword" [(ngModel)]="passwordData.currentPassword" name="currentPassword" class="form-input" required>
              </div>
              <div class="form-group">
                <label for="newPassword">Mật khẩu mới *</label>
                <input type="password" id="newPassword" [(ngModel)]="passwordData.newPassword" name="newPassword" class="form-input" required>
              </div>
              <div class="form-group">
                <label for="confirmPassword">Xác nhận mật khẩu mới *</label>
                <input type="password" id="confirmPassword" [(ngModel)]="passwordData.confirmPassword" name="confirmPassword" class="form-input" required>
              </div>

              @if (passwordMessage) {
                <div class="message success">{{ passwordMessage }}</div>
              }
              @if (passwordError) {
                <div class="message error">{{ passwordError }}</div>
              }

              <div class="form-actions">
                <button type="submit" class="btn btn-primary" [disabled]="isLoadingPassword">
                  {{ isLoadingPassword ? 'Đang đổi...' : 'Đổi mật khẩu' }}
                </button>
              </div>
            </form>
          </div>
        }
      </main>
    </div>
  </div>
</div>