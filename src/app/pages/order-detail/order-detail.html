<div class="profile-page">
  <div class="container">
    <div class="profile-layout">
      
      <app-account-sidebar [activePage]="'orders'"></app-account-sidebar>

      <main class="profile-content">
        @if (isLoading) {
          <div class="loading-state">
            <div class="loading-spinner"></div>
            <p>ƒêang t·∫£i chi ti·∫øt ƒë∆°n h√†ng...</p>
          </div>
        } @else if (errorMessage) {
          <div class="empty-state">
            <div class="empty-icon">üòï</div>
            <h2>L·ªói</h2>
            <p>{{ errorMessage }}</p>
            <a routerLink="/orders" class="btn btn-primary">Quay l·∫°i L·ªãch s·ª≠</a>
          </div>
        } @else if (order) {
          <div class="order-detail-view">
            <a routerLink="/orders" class="back-link">‚Üê Quay l·∫°i danh s√°ch ƒë∆°n h√†ng</a>
            
            <div class="order-detail-header">
              <div class="header-left">
                <h1 class="page-title">Chi ti·∫øt ƒê∆°n h√†ng</h1>
                <span class="order-id">M√£ ƒêH: #{{ order.id }}</span>
                <span class="order-date">Ng√†y ƒë·∫∑t: {{ order.createdAt | date:'dd/MM/yyyy HH:mm' }}</span>
              </div>
              <div class="header-right">
                <span class="status-badge" [ngClass]="getStatusClass(order.status)">
                  {{ getStatusText(order.status) }}
                </span>
              </div>
            </div>

            <div class="order-detail-grid">
              <div class="detail-card">
                <h3>Th√¥ng tin giao h√†ng</h3>
                <div class="address-info">
                  <strong>{{ order.shippingAddress.fullName }}</strong>
                  <p>{{ order.shippingAddress.phone }}</p>
                  <p>{{ order.shippingAddress.street }}</p>
                  <p>{{ order.shippingAddress.city }}, {{ order.shippingAddress.country }}</p>
                </div>
              </div>

              <div class="detail-card">
                <h3>Th√¥ng tin thanh to√°n</h3>
                <div class="payment-info">
                  <p><strong>Ph∆∞∆°ng th·ª©c:</strong> {{ order.paymentMethod }}</p>
                  <p><strong>T·ªïng ti·ªÅn h√†ng:</strong> {{ (order.totalAmount) | number }}‚Ç´</p>
                  <p><strong>Ph√≠ v·∫≠n chuy·ªÉn:</strong> 0‚Ç´</p>
                  <hr>
                  <p class="grand-total"><strong>T·ªïng c·ªông: {{ order.totalAmount | number }}‚Ç´</strong></p>
                </div>
              </div>
            </div>

            <div class="detail-card item-list">
              <h3>Danh s√°ch s·∫£n ph·∫©m ({{ order.items.length }})</h3>
              @for (item of order.items; track item.productId) {
                <div class="order-item">
                  <img [src]="getFullImageUrl(item.image)" alt="{{ item.productName }}" class="item-image">
                  <div class="item-info">
                    <span class="item-name">{{ item.productName }}</span>
                    
                  </div>
                  <div class="item-price-qty">
                    <span class="item-price">{{ item.price | number }}‚Ç´</span>
                    <span class="item-qty">x {{ item.quantity }}</span>
                  </div>
                  <div class="item-total">
                    {{ (item.price * item.quantity) | number }}‚Ç´
                  </div>
                </div>
              }
            </div>
          </div>
        }
      </main>
    </div>
  </div>
</div>