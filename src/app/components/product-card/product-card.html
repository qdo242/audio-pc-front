<div class="product-card" (click)="viewDetail()">
  <div class="product-image">
    <img [src]="displayImage" [alt]="product.name" class="product-img">
    
    @if (product.originalPrice && product.originalPrice > product.price) {
      <div class="discount-badge">
        -{{ getDiscount() }}%
      </div>
    }
    
    @if (product.stock <= 0) {
      <div class="out-of-stock-overlay">
        <span>H·∫øt H√†ng</span>
      </div>
    }
    
    <div class="product-actions">
      <button 
        class="action-btn wishlist-btn" 
        (click)="toggleWishlist($event)"
        [class.active]="isInWishlist()"
        [title]="isInWishlist() ? 'X√≥a kh·ªèi y√™u th√≠ch' : 'Th√™m v√†o y√™u th√≠ch'">
        @if(isInWishlist()) {
          <span>‚ù§Ô∏è</span>
        } @else {
          <span>‚ô°</span>
        }
      </button>
      <button class="action-btn quick-view-btn" (click)="$event.stopPropagation()">
        üëÅÔ∏è
      </button>
    </div>
  </div>
  
  <div class="product-info">
    <div class="product-category">{{ product.category }}</div>
    <h3 class="product-name">{{ product.name }}</h3>
    <p class="product-brand">{{ product.brand }}</p>
    
    <div class="product-rating">
      <span class="stars">{{ getStarRating() }}</span>
      <span class="rating-text">({{ product.reviewCount || 0 }} ƒë√°nh gi√°)</span>
    </div>
    
    <div class="product-price">
      <span class="current-price">{{ product.price | number }}‚Ç´</span>
      @if (product.originalPrice && product.originalPrice > product.price) {
        <span class="original-price">{{ product.originalPrice | number }}‚Ç´</span>
      }
    </div>
    
    <button 
      class="add-to-cart-btn" 
      (click)="addToCart($event)"
      [disabled]="product.stock <= 0"
      [class.disabled]="product.stock <= 0">
      {{ product.stock > 0 ? 'Th√™m V√†o Gi·ªè' : 'H·∫øt H√†ng' }}
    </button>
  </div>
</div>